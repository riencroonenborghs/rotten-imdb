(()=>{"use strict";class e{constructor(e){this.text=e,this.regExp=/([0-9]{4})|(S([0-9]*)E([0-9]*))|([0-9]*)p/}get query(){let e=[];return this._parts.forEach((t=>{null===t.match(this.regExp)&&e.push(t)})),e.join(" ")}get _parts(){const e=this.text.replace(/\./g," ").split(/[ \/]/);return""===e[e.length-1]&&e.pop(),e}}class t{set releaseYear(e){this._releaseYear=e}get releaseYear(){return this._releaseYear}set score(e){this._score=e}get score(){return this._score}set state(e){this._state=e}get state(){return this._state}}class s{constructor(e){this.element=document.createElement("div"),this.element.insertAdjacentHTML("beforeend",e)}parse(){this._movies.forEach((e=>{const t=this._parseMovie(e);console.log(t)}))}get _movies(){return this.element.querySelectorAll("search-page-result[slot='movie'] ul[slot='list'] search-page-media-row[skeleton='panel']")}_parseMovie(e){console.log(e);const s=e.attributes,r=s.getNamedItem("releaseyear").value,o=s.getNamedItem("tomatometerscore").value,a=s.getNamedItem("tomatometerstate").value;return Object.assign(new t,{releaseYear:r,score:o,state:a})}}class r{constructor(e){this.query=e,this.baseUrl="https://www.rottentomatoes.com/search?search="}parse(){fetch(this.url).then((e=>e.text())).then((e=>{new s(e).parse()}))}get url(){return`${this.baseUrl}${this._encodedQuery}`}get _encodedQuery(){return encodeURI(this.query)}}const o={id:"rottenTomatoesLookup",contexts:["selection"],title:"RottenTomatoes Lookup",onclick:function(t){const s=t.selectionText,o=new e(s);new r(o.query).parse()}};chrome.contextMenus.remove(o.id),chrome.contextMenus.create(o)})();